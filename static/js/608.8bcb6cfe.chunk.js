"use strict";(self.webpackChunkfaceswap=self.webpackChunkfaceswap||[]).push([[608],{50608:(e,t,n)=>{n.r(t),n.d(t,{PickerImage:()=>p});var a=n(9950),o=n(81389),r=n(34418),i=n(31317),s=n(20393),c=n(66086),l=n(46569),h=n(81374),d=n(42935),w=n(36275),g=n(67385),u=n(50327),m=n(44414);const p=e=>{let{title:t,placeholder:n,value:p,aspectRatio:b,onChange:f}=e;const[j,x]=(0,a.useState)(),[v,y]=(0,a.useState)();(0,a.useEffect)((()=>{let e=512,t=512;b&&(e=b._w,t=b._h),j&&b&&R({file:j.file,base64:j.base64,width:e,height:t})}),[b,j]);const R=async e=>{let{file:t,base64:n,width:a=512,height:o=512}=e;const r=await(0,g.nJ)({imageSrc:n,rate:a/o,iw:t.width,ih:t.height});y(r),f&&f(r)};return(0,m.jsxs)(o.B,{children:[(0,m.jsxs)(r.z,{justifyContent:"space-between",children:[(0,m.jsx)(i.E,{color:"white",fontSize:16,fontWeight:"700",children:t}),v&&(0,m.jsx)(s.I,{as:u.b6i,boxSize:6,color:"red.400",onClick:()=>{y(null),f&&f(null)}})]}),(0,m.jsx)(w.Ay,{onDrop:async e=>{let t=e[0];t=await new Promise(((e,n)=>{const a=new Image;let o;a.onload=function(){t.width=a.width,t.height=a.height,e(t)},o=URL.createObjectURL(t),a.src=o}));const n=await(0,g.Sk)(t),a={file:t,base64:n};x(a),b||(y(a),f&&f(a))},accept:{"image/jpeg":[],"image/png":[]},multiple:!1,children:e=>{let{getRootProps:t,getInputProps:a}=e;return(0,m.jsx)("div",{...t({className:"dropzone",onDrop:e=>e.stopPropagation()}),children:(0,m.jsxs)(c.o,{borderRadius:8,borderColor:"white",borderWidth:1,minH:40,children:[(0,m.jsx)("input",{...a()}),v&&(0,m.jsx)(c.o,{children:(0,m.jsx)(l._,{w:40,h:40,objectFit:"contain",m:2,src:"".concat(v.base64),alt:"art"})}),!v&&(0,m.jsx)(h.$,{size:"sm",colorScheme:"white",variant:"ghost",borderRadius:"full",_hover:{backgroundColor:"back"},leftIcon:(0,m.jsx)(d.vzv,{color:"white",size:20}),children:(0,m.jsx)(i.E,{fontSize:16,color:"gray.700",fontWeight:"400",children:n})})]})})}})]})}},67385:(e,t,n)=>{n.d(t,{RZ:()=>o,Sk:()=>r,hs:()=>i,nJ:()=>s,yy:()=>a});const a=e=>new Promise((t=>setTimeout(t,e))),o=e=>{let{min:t,max:n}=e;return Math.floor(Math.random()*(n-t+1))+t},r=e=>new Promise(((t,n)=>{const a=new FileReader;a.onloadend=()=>t(a.result),a.readAsDataURL(e)})),i=async e=>{const t=await fetch(e),n=await t.blob();return new Promise(((e,t)=>{const a=new FileReader;a.readAsDataURL(n),a.onloadend=()=>{const t=a.result;e(t)},a.onerror=t}))},s=async e=>{let{imageSrc:t,rate:n,iw:a,ih:o}=e,r=0,i=0,s=0,l=0;o>a||o===a&&n>1?(r=0,i=o/2-a/(2*n),s=a,l=a/n,i<0&&(r=a/2-o*n/2,i=0,s=o*n,l=o)):(r=a/2-o*n/2,i=0,s=o*n,l=o,r<0&&(r=0,i=o/2-a/(2*n),s=a,l=a/n));const h=await(d=t,new Promise(((e,t)=>{const n=new Image;n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(e=>t(e))),n.setAttribute("crossOrigin","anonymous"),n.src=d})));var d;const w=document.createElement("canvas"),g=w.getContext("2d");w.width=s,w.height=l,g.drawImage(h,r,i,s,l,0,0,s,l);const u=w.toDataURL("image/jpeg",1);return{file:c(u,"img.png"),base64:u}},c=(e,t)=>{for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],o=atob(n[1]),r=o.length,i=new Uint8Array(r);r--;)i[r]=o.charCodeAt(r);return new File([i],t,{type:a})}}}]);